<div class="container" style="padding-top: var(--space-lg); padding-bottom: var(--space-xl);">
    <div class="match-detail-container">
        <!-- Header -->
        <div class="detail-header">
            <a routerLink="/player" class="btn btn-secondary">
                ‚Üê Back to Matches
            </a>
            <h2 class="text-gradient">Enter Match Score</h2>
        </div>

        <form (ngSubmit)="onSubmit()">
            <!-- Match Info Card -->
            <div class="card detail-card">
                <div class="info-section">
                    <h3>Match Information</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Date</span>
                            <span class="info-value">{{ currentDate }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Time</span>
                            <span class="info-value">{{ currentTime }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Status</span>
                            <span class="status-badge status-in-progress">Recording Score</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Teams Display -->
            <div class="teams-container">
                <!-- My Team -->
                <div class="card team-card my-team-card">
                    <div class="team-header">
                        <h3>My Team</h3>
                        <span class="team-badge my-badge">YOU</span>
                    </div>

                    <div class="players-list">
                        <!-- Current User -->
                        <div class="player-row is-you">
                            <div class="player-info">
                                <span class="player-name">You</span>
                                <span class="you-indicator">(Me)</span>
                            </div>
                            @if (getCurrentPlayer()) {
                            <span class="player-rating">{{ getCurrentPlayer()!.dupr_rating.toFixed(1) }}</span>
                            }
                        </div>

                        <!-- Partner Selection -->
                        <div class="player-row player-select-row">
                            <select class="player-select" [(ngModel)]="partnerId" name="partner" required>
                                <option value="" disabled>Select Partner</option>
                                @for (player of players(); track player.id) {
                                @if (player.id !== currentUserId) {
                                <option [value]="player.id">{{ player.name }} ({{ player.dupr_rating.toFixed(1) }})
                                </option>
                                }
                                }
                            </select>
                        </div>
                    </div>

                    <!-- Score Input for My Team -->
                    <div class="score-input-section">
                        <label class="score-label">Our Score</label>
                        <input type="number" class="score-input" [(ngModel)]="myScore" name="myScore" placeholder="0"
                            min="0" required>
                    </div>
                </div>

                <!-- VS Divider -->
                <div class="vs-section">
                    <div class="vs-circle">VS</div>
                </div>

                <!-- Opponent Team -->
                <div class="card team-card opponent-team-card">
                    <div class="team-header">
                        <h3>Opponent Team</h3>
                        <span class="team-badge opponent-badge">OPP</span>
                    </div>

                    <div class="players-list">
                        <!-- Opponent 1 Selection -->
                        <div class="player-row player-select-row">
                            <select class="player-select" [(ngModel)]="opponent1Id" name="opp1" required>
                                <option value="" disabled>Select Opponent 1</option>
                                @for (player of players(); track player.id) {
                                <option [value]="player.id">{{ player.name }} ({{ player.dupr_rating.toFixed(1) }})
                                </option>
                                }
                            </select>
                        </div>

                        <!-- Opponent 2 Selection -->
                        <div class="player-row player-select-row">
                            <select class="player-select" [(ngModel)]="opponent2Id" name="opp2" required>
                                <option value="" disabled>Select Opponent 2</option>
                                @for (player of players(); track player.id) {
                                <option [value]="player.id">{{ player.name }} ({{ player.dupr_rating.toFixed(1) }})
                                </option>
                                }
                            </select>
                        </div>
                    </div>

                    <!-- Score Input for Opponent Team -->
                    <div class="score-input-section">
                        <label class="score-label">Their Score</label>
                        <input type="number" class="score-input" [(ngModel)]="opponentScore" name="opponentScore"
                            placeholder="0" min="0" required>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-section">
                <button type="submit" class="btn" [disabled]="!isFormValid()">Submit Score</button>
                <a routerLink="/player" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>